# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json

#
# ⚠️
# `oh-my-posh enable reload` to make changes take effect immeadiately, or `rm -rf ~/.cache/oh-my-posh` after each save.
# `oh-my-posh disable reload` when finished making changes, to speed things up.
#


#
# Docs
#
# https://ohmyposh.dev/docs/installation/customize
# https://ohmyposh.dev/docs/configuration/general
# https://www.nerdfonts.com/cheat-sheet


#
# TODO
#
# high priority
  # parity w/ old prompt like git conflicts, bisecting, etc
  # add spaces in various places
  # better colors, see below
  # bubbles theme - this is an interesting idea, maybe play around w/ it. minimal on the left, info on the right
  # !!! `oh-my-posh disable reload` when done to speed things up

# low priority
  # add screenshots of this and delta diff to the readme. update the prompt descripiont in feature list
  # the background colors of the diamonds etc fade differently than the main segments when they're dimmed b/c they're not the active pane in iterm
  # show git-scm icon if not github or gitlab remote
  # font uninstall 3270 - how? theres no unsinstall command
  # compare to default theme for any config you might want. check a few others too
    # console_title_template: '{{ .Shell }} in {{ .Folder }}'
    # folder_separator_icon: '  '
    # branch_template: '{{ trunc 25 .Branch }}'
  # add more vertical padding around text
    # can't do through oh-my-posh, need to do in iterm. there's a vertical padding setting, but it doesn't affecct leading/trailing diamonds
  # make the order of attributes consistent, like alphabetical or from most fundamental to least


version: 3
final_space: true

palette:
    # test these out
    # m365princess the light and dark blues from
    # cert - red/green/blue
    # chips - path yellow
    # cinnamon - user@host green/blue
    # cloudnativeazure - checkmark
    # dracula - runner blue
    # powerline path blue
    # rudolpsdask green and blue
    # takula shellblue
    # stelbent blue and green
    # thecyberden green

    white: '#FFFFFF'
    black: '#000000'
      # probably make this more like a dark grey
      # need another foreground color to go with things like sky_blue that are lighter. check other themes

    blue: '#33658A'
    sky_blue: '#86BBD8'
    red_orange: '#CC3802'
    green_blue: '#047E84'
    salmon: '#FCA17D'
    peach: '#FFB066'

    grey: '#3B4252'
    dark_grey: '#1C1F26'

    # dont want this for git dirty status, but maybe for stash/conflicts/etc. maybe orange better there though
    # red: '#E06C75'
    # red: '#FF6B6B'
    # red: '#F75F5F'
    # red: '#BE5046'
    # red: '#9D3A33'
    red: '#BE5046'

    #green: '#98C379'
    #green: '#7FC9A6'
    #green: '#6A9955'
    #green: '#4B7043'
    #green: '#3F6B3A'
    green: '#2F5230'

upgrade:
    source: cdn
    interval: 168h
    auto: false
    notice: false

blocks:
    # New line before every prompt, to improve readability
    - type: text
      force: true
      newline: true

    # Context & State
    - type: prompt
      alignment: left
      segments:
        # Shell / username
        - style: diamond
          leading_diamond: ''
          newline: true
          template: '{{ if .Env.LOCALWP_SHELL }} {{ .Env.LOCALWP_SHELL }} {{else}} {{ .HostName }} {{ end }} '
          foreground_templates:
            - '{{ if .Env.LOCALWP_SHELL }}p:dark_grey{{else}}p:white{{ end }}'
          background_templates:
            - '{{ if .Env.LOCALWP_SHELL }}p:peach{{else}}p:green{{ end }}'
          type: session

        # Path
        - properties:
            style: folder
          template: ' {{ .AbsolutePWD }} '
          powerline_symbol: ''
          foreground: p:white
          background: p:blue
          type: path
          style: powerline

        # Git
        - type: git
          style: powerline
          powerline_symbol: ''
          foreground_templates:
            - "{{ if or (.Working.Changed) (.Staging.Changed) }}p:dark_grey{{ else }}p:white{{ end }}"
          background_templates:
            # Not red/green because dirty is the normal state, it should feel calm, not harsh or bad.
            # Clean is the boring state, so it should feel neutral.
            - "{{ if or (.Working.Changed) (.Staging.Changed) }}p:sky_blue{{ else }}p:grey{{ end }}"

          template: >-
            {{ if .Upstream }} {{ .UpstreamIcon }} {{ else }} 󰊢 {{ end }}
            {{ .HEAD }}
            {{ if .BranchStatus }}{{ .BranchStatus }}{{ end }}
            {{ if gt .StashCount 0 }} {{ .StashCount }}{{end}}
          # make the stashcount orange - probably need to create a new proprety for that
          # also show conflicts, rebasing, bisecting, etc. maybe also in orange
          properties:
            fetch_status: true
            fetch_upstream_icon: true
            source: cli
            branch_icon: ''

    # Prompt
    - type: prompt
      newline: true
      alignment: left
      segments:
        - template: ''
          foreground: p:blue
          type: text
          style: plain
